---
- name: Instala√ß√£o de ferramentas essenciais no Linux
  hosts: localhost
  become: yes
  gather_facts: no

  vars:
    packages:
      - wget
      - net-tools
      - qbittorrent

  tasks:

    - name: Mensagem inicial
      debug:
        msg: "üöÄ Iniciando instala√ß√£o de ferramentas essenciais..."

    - name: Instalar pacotes b√°sicos
      apt:
        name: "{{ packages }}"
        state: present
      register: basic_pkgs

    - name: Mostrar progresso pacotes b√°sicos
      debug:
        msg: |
          {% if basic_pkgs.changed %}
          ‚úÖ Pacotes b√°sicos instalados: {{ packages }}
          {% else %}
          ‚ö†Ô∏è Pacotes b√°sicos j√° estavam instalados
          {% endif %}

    - name: Instalar depend√™ncias para reposit√≥rios externos
      apt:
        name:
          - software-properties-common
          - apt-transport-https
          - gnupg
        state: present

    - name: Adicionar chave do VS Code
      apt_key:
        url: https://packages.microsoft.com/keys/microsoft.asc
        state: present

    - name: Adicionar reposit√≥rio do VS Code
      apt_repository:
        repo: "deb [arch=amd64] https://packages.microsoft.com/repos/code stable main"
        state: present

    - name: Adicionar reposit√≥rio do AnyDesk
      apt_repository:
        repo: "deb http://deb.anydesk.com/ all main"
        state: present
        filename: anydesk

    - name: Adicionar chave do AnyDesk
      apt_key:
        url: https://keys.anydesk.com/repos/DEB-GPG-KEY
        state: present

    - name: Atualizar cache do apt
      apt:
        update_cache: yes
      register: apt_update

    - name: Mostrar progresso atualiza√ß√£o cache
      debug:
        msg: "‚úÖ Cache do apt atualizado"

    - name: Instalar Visual Studio Code
      apt:
        name: code
        state: present
      register: vscode

    - name: Mostrar progresso VS Code
      debug:
        msg: |
          {% if vscode.changed %}
          ‚úÖ Visual Studio Code instalado
          {% else %}
          ‚ö†Ô∏è Visual Studio Code j√° estava instalado
          {% endif %}

    - name: Instalar AnyDesk
      apt:
        name: anydesk
        state: present
      register: anydesk

    - name: Mostrar progresso AnyDesk
      debug:
        msg: |
          {% if anydesk.changed %}
          ‚úÖ AnyDesk instalado
          {% else %}
          ‚ö†Ô∏è AnyDesk j√° estava instalado
          {% endif %}

    - name: Mensagem final
      debug:
        msg: "üéâ Instala√ß√£o conclu√≠da!"